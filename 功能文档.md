# example.html 功能文档

## 文件概述
这是一个动态新闻聚合页面，具有自适应布局、统计追踪、内容跳转等功能。

## 主要功能模块

### 1. 统计追踪系统
- **功能描述**: 集成CNZZ统计代码，用于网站访问数据统计
- **实现方式**: 动态创建script标签加载统计脚本
- **统计ID**: 1281389941
- **加载方式**: 异步加载，不阻塞页面渲染

### 2. 响应式布局系统
- **功能描述**: 基于rem单位的响应式布局，适配不同屏幕尺寸
- **核心算法**: `fontSize = clientWidth / 10`
- **监听事件**: 
  - `resize`: 窗口大小变化时重新计算
  - `pageshow`: 页面显示时重新计算（兼容浏览器后退）
- **兼容性**: 支持iOS Safari的页面缓存机制

### 3. 域名识别与标题设置
- **功能描述**: 根据当前域名自动设置页面标题
- **支持域名列表**:
  - `hotnewx.com` → "今日导播"
  - `shangjinssp.com` → "每日新闻"
  - `funthings.cn` → "每日播报"
  - `jiatouyihao.cn` → "今天看点"
  - `shanghaihuanchengjie.cn` → "热闻导播"

### 4. 内容管理系统
- **API接口**: `/srv/news/news_ad_info_new`
- **请求参数**: `host` (当前域名)
- **响应处理**: 支持code 200的成功状态码
- **数据结构**: 包含广告配置、热词信息、文章数量等

### 5. iframe内容嵌入
- **功能描述**: 动态生成iframe嵌入外部内容
- **内容源**: 基于配置的路径列表和热词组合
- **样式设置**: 
  - 宽度: 100vw (视口宽度)
  - 高度: 100vh (视口高度)
  - 边框: 无边框

### 6. 路径解析系统
- **功能描述**: 解析广告配置中的路径信息
- **分隔符**: "众翼" (用于分割多个路径)
- **过滤规则**: 移除"分割线"标记，过滤空路径
- **返回结果**: 有效路径数组

### 7. 跳转控制系统
- **跳转状态**: 通过`jumpStatus`控制是否启用跳转
- **延迟跳转**: 支持`delayJumpNum`次延迟跳转
- **跳转时机**: 基于`jumpTime`(秒)设置跳转间隔
- **跳转条件**: 
  - 无延迟跳转次数限制时直接跳转
  - 有延迟跳转次数限制时按次数递增跳转
  - 支持详情点击次数限制

### 8. 历史记录管理
- **功能描述**: 使用HTML5 History API管理页面状态
- **操作方式**: `pushState`添加新状态
- **事件监听**: `popstate`事件处理浏览器前进后退
- **状态恢复**: 返回时重新初始化页面

### 9. 视觉指示器
- **手型图标**: 当有文章数量时显示
- **样式特性**:
  - 位置: 右上角38%位置
  - 尺寸: 1.3333rem × 1.3333rem
  - 动画: 1秒线性无限循环的缩放动画
  - 图片源: `http://cdn.mktcircle.cn/news_common/hand.png`

### 10. 数据上报系统
- **功能描述**: 向服务器上报用户行为数据
- **接口地址**: `/srv/news/notice_one_word`
- **请求方式**: POST
- **上报数据**:
  - `id`: 热词ID
  - `word`: 热词内容
  - `host`: 当前域名
- **请求头**: `Content-Type: application/x-www-form-urlencoded;charset=UTF-8`

### 11. 错误处理与容错
- **网络请求**: 使用fetch API，支持Promise链式调用
- **数据验证**: 检查响应状态码和数据完整性
- **默认行为**: 当跳转条件不满足时执行默认链接跳转

## 技术特点

### 前端技术
- **原生JavaScript**: 无框架依赖，轻量级实现
- **ES6+语法**: 使用箭头函数、模板字符串、解构赋值等
- **响应式设计**: 基于rem的弹性布局
- **动画效果**: CSS3 keyframes动画

### 架构设计
- **模块化**: 功能分离，职责明确
- **事件驱动**: 基于事件的状态管理
- **配置驱动**: 通过API配置控制页面行为
- **状态管理**: 使用全局变量管理应用状态

### 性能优化
- **异步加载**: 统计代码异步加载
- **事件节流**: resize事件优化
- **条件渲染**: 按需显示UI元素

## 使用场景
1. **新闻聚合网站**: 多域名内容聚合
2. **广告投放平台**: 动态内容展示
3. **移动端适配**: 响应式布局支持
4. **用户行为分析**: 访问统计和数据上报

## 注意事项
1. 依赖外部API服务，需要确保服务可用性
2. 跨域iframe内容需要目标站点支持
3. 统计代码依赖第三方服务
4. 跳转逻辑复杂，需要仔细测试各种场景 